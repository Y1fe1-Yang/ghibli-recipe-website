# 🌿 吉卜力食谱厨房 (Ghibli Recipe Kitchen)

AI驱动的吉卜力风格食谱生成网站，支持用户登录、食谱搜索和智能生成。

## ✨ 核心功能

### 1. AI食谱生成
- 输入菜名，自动生成完整食谱（食材、步骤、烹饪时间等）
- 使用Claude Sonnet 4生成专业食谱内容
- 使用Flux 1.1 Pro生成精美的吉卜力风格美食插图
- 自动缓存已生成的食谱，避免重复生成

### 2. 用户系统
- 注册/登录功能
- JWT身份验证
- 密码加密存储（bcrypt）
- 仅登录用户可生成食谱

### 3. 食谱管理
- 浏览所有食谱
- 实时搜索（菜名、描述、食材）
- 查看详细步骤和食材清单
- 点赞功能
- 浏览量统计

### 4. 吉卜力美学设计
- 温暖的大地色系配色方案
- 水彩画风格UI设计
- 漂浮的叶子装饰动画
- 柔和的阴影和圆角设计
- 响应式布局，完美适配移动端

## 🚀 快速开始

### 访问地址
**外部访问链接：** https://3000-capy-1769767690860-182316-preview.happycapy.ai

### 本地运行

1. 安装依赖
```bash
npm install
```

2. 启动服务器
```bash
AI_GATEWAY_API_KEY=your_api_key npm start
```

3. 访问应用
打开浏览器访问：http://localhost:3000

## 📖 使用说明

### 首次使用
1. 点击右上角"注册"按钮创建账号
2. 输入用户名、邮箱和密码完成注册
3. 自动登录后即可使用所有功能

### 生成食谱
1. 点击"✨ 生成食谱"按钮
2. 输入菜名（必填），如"番茄炒蛋"
3. 可选填写菜系（如川菜、粤菜）和饮食限制（如素食、无麸质）
4. 点击"开始生成"，等待30-60秒
5. AI将生成食谱内容和吉卜力风格插图

### 搜索食谱
1. 在顶部搜索框输入关键词
2. 支持搜索菜名、描述、食材
3. 实时显示搜索结果

### 查看食谱详情
1. 点击任意食谱卡片
2. 查看完整的食材清单和烹饪步骤
3. 可以点击❤️按钮点赞

## 🛠 技术栈

### 后端
- **Node.js + Express** - 服务器框架
- **JWT** - 身份验证
- **bcryptjs** - 密码加密
- **文件存储** - JSON文件存储用户和食谱数据

### 前端
- **原生HTML/CSS/JavaScript** - 无需构建工具
- **响应式设计** - 完美适配各种设备
- **吉卜力美学** - 温暖、柔和的视觉风格

### AI服务
- **Claude Sonnet 4** - 食谱内容生成
- **Flux 1.1 Pro** - 吉卜力风格图片生成
- **AI Gateway API** - 统一的AI服务接口

## 📁 项目结构

```
ghibli-recipe-app/
├── server/
│   └── index.js          # 后端API服务器
├── public/
│   └── index.html        # 前端应用
├── data/
│   ├── users.json        # 用户数据
│   └── recipes.json      # 食谱数据
├── package.json
└── README.md
```

## 🔑 API端点

### 认证
- `POST /api/register` - 用户注册
- `POST /api/login` - 用户登录

### 食谱
- `GET /api/recipes` - 获取所有食谱（支持搜索参数）
- `GET /api/recipes/:id` - 获取单个食谱
- `POST /api/recipes/generate` - AI生成食谱（需要登录）
- `POST /api/recipes/:id/like` - 点赞食谱（需要登录）
- `POST /api/recipes/:id/view` - 记录浏览量

### 其他
- `GET /api/health` - 健康检查

## 🎨 设计特色

### 色彩方案
- 吉卜力绿 (Ghibli Green): `#7FB069`
- 奶油白 (Cream): `#FFFBF0`
- 棕色 (Brown): `#8B5A3C`
- 天空蓝 (Sky): `#A8DADC`
- 珊瑚红 (Coral): `#E76F51`
- 鼠尾草绿 (Sage): `#B7C9A7`

### 字体
- **Noto Serif SC** - 衬线主字体
- **Ma Shan Zheng** - 手写风格标题
- **ZCOOL XiaoWei** - 中文辅助字体

### 动画效果
- 漂浮叶子动画
- 卡片悬停效果
- 模态框渐入动画
- Toast通知提示

## 💡 使用提示

1. **生成时间**：AI生成食谱和图片大约需要30-60秒，请耐心等待
2. **食谱缓存**：已生成的食谱会自动保存，再次生成同名食谱会直接返回
3. **搜索技巧**：可以搜索菜名、食材或烹饪方式
4. **移动端**：网站完全响应式，可在手机上流畅使用

## 🔒 数据安全

- 密码使用bcrypt加密存储
- JWT token有效期7天
- 所有敏感操作需要身份验证
- 数据存储在本地JSON文件

## 🐛 故障排除

### 生成食谱失败
- 检查AI_GATEWAY_API_KEY是否配置正确
- 查看服务器日志：`tail -f /tmp/ghibli-server.log`
- 确保网络连接正常

### 无法登录
- 检查邮箱和密码是否正确
- 清除浏览器缓存和localStorage
- 重新注册账号

### 图片加载慢
- 吉卜力风格图片约1-2MB，首次加载可能较慢
- 使用浏览器缓存加速后续访问

## 📝 开发说明

### 添加新功能
1. 后端API在 `server/index.js`
2. 前端代码在 `public/index.html`
3. 数据存储在 `data/` 目录

### 自定义样式
所有CSS变量定义在`:root`中，可轻松修改配色方案。

### 扩展存储
当前使用JSON文件存储，可替换为：
- SQLite
- MongoDB
- PostgreSQL

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交Issue和Pull Request！

---

用❤️制作，灵感来自吉卜力工作室的美学风格
